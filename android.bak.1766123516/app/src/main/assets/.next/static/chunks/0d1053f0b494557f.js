(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},94179,e=>{"use strict";var s=e.i(43476),t=e.i(25913),a=e.i(47163);let r=(0,t.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...i}){return(0,s.jsx)("div",{className:(0,a.cn)(r({variant:t}),e),...i})}e.s(["Badge",()=>i])},87316,3116,e=>{"use strict";var s=e.i(75254);let t=(0,s.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316);let a=(0,s.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>a],3116)},25652,e=>{"use strict";let s=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>s],25652)},78892,e=>{"use strict";var s=e.i(43476),t=e.i(94179);function a({status:e}){return(0,s.jsx)(t.Badge,{variant:(e=>{switch(e){case"completed":case"done":case"paid":case"active":return"success";case"in_progress":case"in_review":case"sent":return"info";case"planning":case"pending":case"draft":return"warning";case"stuck":case"blocked":case"cancelled":case"overdue":case"inactive":return"destructive";default:return"default"}})(e),children:e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")})}e.s(["StatusBadge",()=>a])},87336,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(30030),r=e.i(48425),i="Progress",[l,n]=(0,a.createContextScope)(i),[d,c]=l(i),o=t.forwardRef((e,t)=>{var a,i;let{__scopeProgress:l,value:n=null,max:c,getValueLabel:o=x,...m}=e;(c||0===c)&&!f(c)&&console.error((a=`${c}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=f(c)?c:100;null===n||j(n,u)||console.error((i=`${n}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let g=j(n,u)?n:null,v=p(g)?o(g,u):void 0;return(0,s.jsx)(d,{scope:l,value:g,max:u,children:(0,s.jsx)(r.Primitive.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":p(g)?g:void 0,"aria-valuetext":v,role:"progressbar","data-state":h(g,u),"data-value":g??void 0,"data-max":u,...m,ref:t})})});o.displayName=i;var m="ProgressIndicator",u=t.forwardRef((e,t)=>{let{__scopeProgress:a,...i}=e,l=c(m,a);return(0,s.jsx)(r.Primitive.div,{"data-state":h(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...i,ref:t})});function x(e,s){return`${Math.round(e/s*100)}%`}function h(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function p(e){return"number"==typeof e}function f(e){return p(e)&&!isNaN(e)&&e>0}function j(e,s){return p(e)&&!isNaN(e)&&e<=s&&e>=0}u.displayName=m;var g=e.i(47163);let v=t.forwardRef(({className:e,value:t,...a},r)=>(0,s.jsx)(o,{ref:r,className:(0,g.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:(0,s.jsx)(u,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));v.displayName=o.displayName,e.s(["Progress",()=>v],87336)},39951,e=>{"use strict";let s=(0,e.i(75254).default)("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]);e.s(["ListTodo",()=>s],39951)},56272,e=>{"use strict";let s=(0,e.i(75254).default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckSquare",()=>s],56272)},28562,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(70065),i=e.i(67881),l=e.i(87336),n=e.i(62870),d=e.i(87316),c=e.i(3116);let o=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=e.i(31278),u=e.i(25652),x=e.i(39951),h=e.i(61911),p=e.i(78716),f=e.i(82293),j=e.i(56272),g=e.i(20755),v=e.i(61668),N=e.i(78892);function y(){let e=(0,a.useParams)(),y=(0,a.useRouter)(),{user:b}=(0,v.useAuth)(),[w,_]=(0,t.useState)(null),[k,C]=(0,t.useState)([]),[S,P]=(0,t.useState)([]),[M,D]=(0,t.useState)([]),[q,T]=(0,t.useState)(!0),[B,L]=(0,t.useState)(!1);(0,t.useEffect)(()=>{I()},[e.id]);let I=async()=>{if(!e.id)return;T(!0);let s=(0,g.createClient)();try{let{data:t}=await s.from("projects").select("*, clients(company_name)").eq("id",e.id).single();t&&_(t);let{data:a}=await s.from("milestones").select("*").eq("project_id",e.id).order("due_date",{ascending:!0});a&&C(a);let{data:r}=await s.from("sub_projects").select("*, assigned_user:users!sub_projects_assigned_to_fkey(id, email, full_name)").eq("project_id",e.id);r&&P(r);let{data:i}=await s.from("project_team").select("users(id, email, full_name, role)").eq("project_id",e.id);if(i){let e=i.flatMap(e=>{let s=e.users;return s?Array.isArray(s)?s:[s]:[]});D(e)}}catch(e){console.error("Error loading project details:",e)}finally{T(!1)}},A=async(e,s)=>{L(!0);let t=(0,g.createClient)();try{let{error:a}=await t.from("sub_projects").update({status:s}).eq("id",e);if(!a){P(S.map(t=>t.id===e?{...t,status:s}:t));let a=S.find(s=>s.id===e);a&&a.assigned_to===b?.id&&await t.from("employee_tasks").update({status:s}).eq("project_id",w?.id).eq("user_id",b?.id).eq("title",a.name)}}catch(e){console.error("Error updating status:",e)}finally{L(!1)}};return q?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin"})}):w?(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto p-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>y.back(),children:(0,s.jsx)(o,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:w.name}),(0,s.jsx)(N.StatusBadge,{status:w.status})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Client: ",w.clients?.company_name||"No client"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-3",children:"Project Overview"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[w.start_date&&(0,s.jsxs)("div",{className:"p-3 rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[(0,s.jsx)(d.Calendar,{className:"h-3 w-3"}),"Start Date"]}),(0,s.jsx)("p",{className:"font-semibold",children:new Date(w.start_date).toLocaleDateString()})]}),w.deadline&&(0,s.jsxs)("div",{className:"p-3 rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[(0,s.jsx)(c.Clock,{className:"h-3 w-3"}),"Deadline"]}),(0,s.jsx)("p",{className:"font-semibold",children:new Date(w.deadline).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"p-3 rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[(0,s.jsx)(u.TrendingUp,{className:"h-3 w-3"}),"Progress"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Progress,{value:w.progress_percentage,className:"h-2 flex-1"}),(0,s.jsxs)("span",{className:"font-semibold text-sm",children:[w.progress_percentage,"%"]})]})]})]})]}),w.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:w.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,s.jsx)(x.ListTodo,{className:"h-4 w-4"}),"Sub-Projects / Tasks"]})}),S.length>0?(0,s.jsx)("div",{className:"space-y-2",children:S.map(e=>(0,s.jsx)(r.Card,{className:"hover:border-primary/50 transition-colors",children:(0,s.jsx)(r.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("h4",{className:"font-medium",children:e.name}),(0,s.jsx)(N.StatusBadge,{status:e.status})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),e.video_url&&(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("a",{href:e.video_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[(0,s.jsx)(p.Video,{className:"h-3 w-3"}),"View Video"]})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[e.assigned_user&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(f.UserCheck,{className:"h-3 w-3"}),e.assigned_user.full_name||e.assigned_user.email]}),e.due_date&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Calendar,{className:"h-3 w-3"}),new Date(e.due_date).toLocaleDateString()]})]})]}),e.assigned_to===b?.id&&(0,s.jsxs)(n.Select,{value:e.status,onValueChange:s=>A(e.id,s),disabled:B,children:[(0,s.jsx)(n.SelectTrigger,{className:"w-[130px]",children:(0,s.jsx)(n.SelectValue,{})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"planning",children:"Planning"}),(0,s.jsx)(n.SelectItem,{value:"in_progress",children:"In Progress"}),(0,s.jsx)(n.SelectItem,{value:"in_review",children:"In Review"}),(0,s.jsx)(n.SelectItem,{value:"completed",children:"Completed"}),(0,s.jsx)(n.SelectItem,{value:"stuck",children:"Stuck"})]})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Progress,{value:e.progress_percentage,className:"h-2 flex-1"}),(0,s.jsxs)("span",{className:"text-xs font-medium w-10 text-right",children:[e.progress_percentage,"%"]})]})})]})})},e.id))}):(0,s.jsx)(r.Card,{children:(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,s.jsx)(x.ListTodo,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No tasks yet for this project."]})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("h3",{className:"font-semibold",children:"Milestones"})}),k.length>0?(0,s.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,s.jsx)(r.Card,{children:(0,s.jsx)(r.CardContent,{className:"p-4",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("h4",{className:"font-medium",children:e.title}),(0,s.jsx)(N.StatusBadge,{status:e.status})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),e.due_date&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]})})})},e.id))}):(0,s.jsx)(r.Card,{children:(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,s.jsx)(j.CheckSquare,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No milestones yet for this project."]})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("h3",{className:"font-semibold",children:"Team Members"})}),M.length>0?(0,s.jsx)("div",{className:"space-y-2",children:M.map(e=>(0,s.jsx)(r.Card,{children:(0,s.jsx)(r.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium",children:e.full_name?.charAt(0)||e.email.charAt(0)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.full_name||e.email}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:e.role?.replace("_"," ")})]})]})})},e.id))}):(0,s.jsx)(r.Card,{children:(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,s.jsx)(h.Users,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No team members assigned yet."]})})})]})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen gap-4",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Project not found"}),(0,s.jsx)(i.Button,{onClick:()=>y.back(),children:"Go Back"})]})}e.s(["default",()=>y],28562)}]);