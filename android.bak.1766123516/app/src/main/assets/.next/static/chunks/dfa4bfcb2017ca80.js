(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9598,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(20755),i=e.i(61668),r=e.i(70065),c=e.i(67881),n=e.i(95187),d=(0,n.createServerReference)("408c33e2053a5e4ec12804d77b9a527496c0be7d31",n.callServer,void 0,n.findSourceMapURL,"markAllNotificationsRead");function l(){let{user:e}=(0,i.useAuth)(),[n,l]=(0,s.useState)([]),[o,m]=(0,s.useState)(!0),[u,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{!async function(){if(!e)return;let t=(0,a.createClient)();m(!0);try{let{data:s}=await t.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(200);l(s||[])}catch(e){console.error("Failed to fetch notifications",e)}finally{m(!1)}}()},[e?.id]);let x=async()=>{e&&(f(!0),(await d(e.id)).success&&l(e=>e.map(e=>({...e,read:!0}))),f(!1))};return(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.CardTitle,{children:"Notifications"}),(0,t.jsx)(r.CardDescription,{children:"In-app alerts for comments and assignments"})]}),(0,t.jsx)(c.Button,{variant:"outline",size:"sm",onClick:x,disabled:u,children:"Mark all read"})]}),(0,t.jsx)(r.CardContent,{className:"space-y-3",children:o?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loadingâ€¦"}):0===n.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No notifications"}):n.map(e=>(0,t.jsxs)("div",{className:`p-3 border rounded-lg ${e.read?"bg-background":"bg-accent/20"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:e.type}),(0,t.jsx)("span",{children:new Date(e.created_at).toLocaleString()})]}),(0,t.jsx)("p",{className:"text-sm",children:e.message})]},e.id))})]})})}e.s(["default",()=>l],9598)}]);