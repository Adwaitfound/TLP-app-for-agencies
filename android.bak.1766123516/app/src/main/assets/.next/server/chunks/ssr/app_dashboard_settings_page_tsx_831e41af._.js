module.exports=[57417,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(46893),i=a.i(7379),j=a.i(21958),k=a.i(7706),l=a.i(87682),m=a.i(46842),n=a.i(67900),o=a.i(23312),p=a.i(43108),q=a.i(96221),r=a.i(67453),s=a.i(38422),t=a.i(69240),u=a.i(94861);function v(){let{user:a,loading:v,setUser:w}=(0,s.useAuth)(),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)({current:"",new:"",confirm:""}),[D,E]=(0,c.useState)({full_name:"",email:"",phone:"",bio:"",avatar_url:""}),[F,G]=(0,c.useState)({company_name:"",website:"",industry:"media",address:"",tax_id:"",company_size:"small"});async function H(){if(!a)return;y(!0),u.debug.log("SETTINGS","Saving profile",{userId:a.id});let b=(0,t.createClient)();try{let{data:c,error:d}=await b.from("users").update({full_name:D.full_name,phone:D.phone,bio:D.bio,avatar_url:D.avatar_url}).eq("id",a.id).select().single();if(d)throw d;u.debug.success("SETTINGS","Profile saved"),c&&w(c),A("Profile updated successfully!"),setTimeout(()=>A(""),3e3)}catch(a){u.debug.error("SETTINGS","Save profile error",{message:a.message}),alert("Failed to save profile: "+a.message)}finally{y(!1)}}async function I(){if(!a)return;y(!0),u.debug.log("SETTINGS","Saving company data",{userId:a.id});let b=(0,t.createClient)();try{let{data:c,error:d}=await b.from("users").update({company_name:F.company_name,website:F.website,industry:F.industry,address:F.address,tax_id:F.tax_id,company_size:F.company_size}).eq("id",a.id).select().single();if(d)throw d;u.debug.success("SETTINGS","Company data saved"),c&&w(c),A("Company information updated successfully!"),setTimeout(()=>A(""),3e3)}catch(a){u.debug.error("SETTINGS","Save company error",{message:a.message}),alert("Failed to save company information: "+a.message)}finally{y(!1)}}async function J(a){if(a.preventDefault(),B.new!==B.confirm)return void alert("New passwords don't match");if(B.new.length<6)return void alert("Password must be at least 6 characters");y(!0),u.debug.log("SETTINGS","Changing password");let b=(0,t.createClient)();try{let{error:a}=await b.auth.updateUser({password:B.new});if(a)throw a;u.debug.success("SETTINGS","Password changed"),A("Password updated successfully!"),C({current:"",new:"",confirm:""}),setTimeout(()=>A(""),3e3)}catch(a){u.debug.error("SETTINGS","Change password error",{message:a.message}),alert("Failed to change password: "+a.message)}finally{y(!1)}}return((0,c.useEffect)(()=>{a&&(u.debug.log("SETTINGS","Loading user data",{userId:a.id}),E({full_name:a.full_name||"",email:a.email||"",phone:a.phone||"",bio:a.bio||"",avatar_url:a.avatar_url||""}),("admin"===a.role||"project_manager"===a.role)&&G({company_name:a.company_name||"",website:a.website||"",industry:a.industry||"media",address:a.address||"",tax_id:a.tax_id||"",company_size:a.company_size||"small"}))},[a]),v||!a)?(0,b.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,b.jsx)(q.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:gap-6",children:[z&&(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,b.jsx)(r.CheckCircle2,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),(0,b.jsx)("span",{className:"text-sm text-green-700 dark:text-green-300",children:z})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"Settings"}),(0,b.jsx)("p",{className:"text-sm md:text-base text-muted-foreground",children:"Manage your account settings and preferences"})]}),(0,b.jsxs)(j.Tabs,{defaultValue:"profile",className:"space-y-4",children:[(0,b.jsxs)(j.TabsList,{className:"grid w-full grid-cols-2 md:grid-cols-4",children:[(0,b.jsxs)(j.TabsTrigger,{value:"profile",className:"text-xs md:text-sm",children:[(0,b.jsx)(m.User,{className:"h-4 w-4 md:mr-2"}),(0,b.jsx)("span",{className:"hidden md:inline",children:"Profile"})]}),("admin"===a.role||"project_manager"===a.role)&&(0,b.jsxs)(j.TabsTrigger,{value:"company",className:"text-xs md:text-sm",children:[(0,b.jsx)(n.Building2,{className:"h-4 w-4 md:mr-2"}),(0,b.jsx)("span",{className:"hidden md:inline",children:"Company"})]}),(0,b.jsxs)(j.TabsTrigger,{value:"notifications",className:"text-xs md:text-sm",children:[(0,b.jsx)(o.Bell,{className:"h-4 w-4 md:mr-2"}),(0,b.jsx)("span",{className:"hidden md:inline",children:"Notifications"})]}),(0,b.jsxs)(j.TabsTrigger,{value:"security",className:"text-xs md:text-sm",children:[(0,b.jsx)(p.Lock,{className:"h-4 w-4 md:mr-2"}),(0,b.jsx)("span",{className:"hidden md:inline",children:"Security"})]})]}),(0,b.jsx)(j.TabsContent,{value:"profile",className:"space-y-4",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Profile Information"}),(0,b.jsx)(d.CardDescription,{children:"Update your personal information"})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[(0,b.jsxs)(k.Avatar,{className:"h-20 w-20",children:[(0,b.jsx)(k.AvatarImage,{src:D.avatar_url}),(0,b.jsx)(k.AvatarFallback,{children:a.full_name?.charAt(0)||"U"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.full_name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.email}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Role: ",(0,b.jsx)("span",{className:"capitalize",children:a.role.replace("_"," ")})]})]})]}),(0,b.jsx)(i.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"fullName",children:"Full Name"}),(0,b.jsx)(f.Input,{id:"fullName",value:D.full_name,onChange:a=>E({...D,full_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(f.Input,{id:"email",type:"email",value:D.email,disabled:!0,className:"opacity-50 cursor-not-allowed"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"phone",children:"Phone Number"}),(0,b.jsx)(f.Input,{id:"phone",value:D.phone,onChange:a=>E({...D,phone:a.target.value}),placeholder:"+91 98765 43210"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"bio",children:"Bio"}),(0,b.jsx)(h.Textarea,{id:"bio",placeholder:"Tell us about yourself",value:D.bio,onChange:a=>E({...D,bio:a.target.value}),rows:3})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>{a&&E({full_name:a.full_name||"",email:a.email||"",phone:a.phone||"",bio:a.bio||"",avatar_url:a.avatar_url||""})},children:"Reset"}),(0,b.jsxs)(e.Button,{onClick:H,disabled:x,children:[x&&(0,b.jsx)(q.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})]})}),("admin"===a.role||"project_manager"===a.role)&&(0,b.jsx)(j.TabsContent,{value:"company",className:"space-y-4",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Company Information"}),(0,b.jsx)(d.CardDescription,{children:"Manage your company details"})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"companyName",children:"Company Name"}),(0,b.jsx)(f.Input,{id:"companyName",value:F.company_name,onChange:a=>G({...F,company_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"website",children:"Website"}),(0,b.jsx)(f.Input,{id:"website",placeholder:"https://example.com",value:F.website,onChange:a=>G({...F,website:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"industry",children:"Industry"}),(0,b.jsxs)(l.Select,{value:F.industry,onValueChange:a=>G({...F,industry:a}),children:[(0,b.jsx)(l.SelectTrigger,{id:"industry",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"media",children:"Media & Entertainment"}),(0,b.jsx)(l.SelectItem,{value:"marketing",children:"Marketing & Advertising"}),(0,b.jsx)(l.SelectItem,{value:"production",children:"Video Production"}),(0,b.jsx)(l.SelectItem,{value:"other",children:"Other"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"companyAddress",children:"Address"}),(0,b.jsx)(h.Textarea,{id:"companyAddress",placeholder:"Enter your company address",value:F.address,onChange:a=>G({...F,address:a.target.value}),rows:3})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"taxId",children:"Tax ID"}),(0,b.jsx)(f.Input,{id:"taxId",placeholder:"XX-XXXXXXX",value:F.tax_id,onChange:a=>G({...F,tax_id:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"companySize",children:"Company Size"}),(0,b.jsxs)(l.Select,{value:F.company_size,onValueChange:a=>G({...F,company_size:a}),children:[(0,b.jsx)(l.SelectTrigger,{id:"companySize",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"solo",children:"Solo (1)"}),(0,b.jsx)(l.SelectItem,{value:"small",children:"Small (2-10)"}),(0,b.jsx)(l.SelectItem,{value:"medium",children:"Medium (11-50)"}),(0,b.jsx)(l.SelectItem,{value:"large",children:"Large (50+)"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",children:"Reset"}),(0,b.jsxs)(e.Button,{onClick:I,disabled:x,children:[x&&(0,b.jsx)(q.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})]})}),(0,b.jsx)(j.TabsContent,{value:"notifications",className:"space-y-4",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Notification Preferences"}),(0,b.jsx)(d.CardDescription,{children:"Manage your notification settings (coming soon)"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Notification preferences will be available in a future update."})})]})}),(0,b.jsx)(j.TabsContent,{value:"security",className:"space-y-4",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Change Password"}),(0,b.jsx)(d.CardDescription,{children:"Update your account password"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"newPassword",children:"New Password"}),(0,b.jsx)(f.Input,{id:"newPassword",type:"password",value:B.new,onChange:a=>C({...B,new:a.target.value}),placeholder:"Minimum 6 characters"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,b.jsx)(f.Input,{id:"confirmPassword",type:"password",value:B.confirm,onChange:a=>C({...B,confirm:a.target.value}),placeholder:"Re-enter your new password"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>C({current:"",new:"",confirm:""}),children:"Cancel"}),(0,b.jsxs)(e.Button,{type:"submit",disabled:x||!B.new||!B.confirm,children:[x&&(0,b.jsx)(q.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Password"]})]})]})})]})})]})]})}a.s(["default",()=>v])}];

//# sourceMappingURL=app_dashboard_settings_page_tsx_831e41af._.js.map