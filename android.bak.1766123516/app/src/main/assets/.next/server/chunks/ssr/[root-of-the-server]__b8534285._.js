module.exports=[81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},69051,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},88347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67009,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},90841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(72131)),g=a.r(67009),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},20611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(72131),e=a.r(88347),f=a.r(90841);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1722,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(69051)},3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},94861,a=>{"use strict";let b=new class{logs=[];maxLogs=500;log(a,b,c){this.addLog(a,b,"log",c)}warn(a,b,c){this.addLog(a,b,"warn",c)}error(a,b,c){this.addLog(a,b,"error",c)}success(a,b,c){this.addLog(a,b,"success",c)}addLog(a,b,c,d){let e=new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3});this.logs.push({timestamp:e,context:a,message:b,level:c,data:d}),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs));let f=this.getColor(c),g=this.getIcon(c),h=d?` ${JSON.stringify(d)}`:"";console.log(`%c${g} [${e}] ${a}: ${b}${h}`,`color: ${f}; font-weight: bold; background-color: rgba(0,0,0,0.05); padding: 2px 4px; border-radius: 3px;`)}getColor(a){switch(a){case"log":return"#0066cc";case"warn":return"#ff9900";case"error":return"#cc0000";case"success":return"#00aa00";default:return"#333333"}}getIcon(a){switch(a){case"log":return"ðŸ“‹";case"warn":return"âš ï¸";case"error":return"âŒ";case"success":return"âœ…";default:return"ðŸ“Œ"}}getLogs(){return[...this.logs]}clearLogs(){this.logs=[],console.log("%cðŸ§¹ Debug logs cleared","color: #666; font-weight: bold;")}exportLogs(){return JSON.stringify(this.logs,null,2)}downloadLogs(){let a="data:application/json;charset=utf-8,"+encodeURIComponent(this.exportLogs()),b=`debug-logs-${new Date().toISOString()}.json`,c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",b),c.click(),console.log("ðŸ“¥ Debug logs downloaded:",b)}printSummary(){console.table({total:this.logs.length,logs:this.logs.filter(a=>"log"===a.level).length,warnings:this.logs.filter(a=>"warn"===a.level).length,errors:this.logs.filter(a=>"error"===a.level).length,successes:this.logs.filter(a=>"success"===a.level).length}),console.log("%cAll Logs:","font-weight: bold; font-size: 14px;"),console.table(this.logs)}};a.s(["debug",0,b])},38422,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(69240),f=a.i(94861);let g=(0,c.createContext)(void 0);function h({children:a}){let[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),n=(0,d.useRouter)(),o=(0,e.createClient)(),p=async a=>{let b=a.user_metadata?.role||"project_manager",c=a.user_metadata?.full_name||a.email?.split("@")[0]||"User";f.debug.log("AUTH","Fetching user profile from users table...",{userId:a.id});let{data:d,error:e}=await o.from("users").select("*").eq("id",a.id);if(e)return f.debug.error("AUTH","Failed to fetch user profile",{message:e.message,code:e.code}),null;if(d&&d.length>0)return f.debug.success("AUTH","User profile loaded",{email:d[0].email,role:d[0].role}),d[0];f.debug.warn("AUTH","User profile missing, creating default profile",{userId:a.id,email:a.email,role:b});let{error:g}=await o.from("users").insert({id:a.id,email:a.email,full_name:c,role:b});if(g)return f.debug.error("AUTH","Failed to create user profile",{message:g.message,code:g.code}),null;let{data:h,error:i}=await o.from("users").select("*").eq("id",a.id);if(i)return f.debug.error("AUTH","Profile created but refetch failed",{message:i.message,code:i.code}),null;let j=h?.[0]||null;return j&&f.debug.success("AUTH","User profile created",{email:j.email,role:j.role}),j};(0,c.useEffect)(()=>{(async()=>{try{f.debug.log("AUTH","Initializing auth context...");let{data:{session:a},error:b}=await o.auth.getSession();if(b&&f.debug.error("AUTH","Failed to fetch session",{message:b.message,code:b.code}),console.log("Auth context init: session user:",a?.user?.email),f.debug.log("AUTH","Session fetched",{email:a?.user?.email,userId:a?.user?.id}),a?.user){k(a.user);let b=await p(a.user);b&&i(b)}else f.debug.log("AUTH","No active session found")}catch(a){console.error("Auth context init error:",a.message),f.debug.error("AUTH","Init error",{message:a.message})}finally{m(!1),f.debug.log("AUTH","Auth init complete")}})();let{data:{subscription:a}}=o.auth.onAuthStateChange(async(a,b)=>{if(console.log("Auth state change event:",a,"user:",b?.user?.email),f.debug.log("AUTH","Auth state changed",{event:a,email:b?.user?.email,userId:b?.user?.id}),b?.user){k(b.user);let a=await p(b.user);a?i(a):i(null)}else f.debug.log("AUTH","Session cleared, setting user to null"),k(null),i(null);m(!1)});return()=>{a.unsubscribe()}},[o]),(0,c.useEffect)(()=>{if(!j?.id)return;let a=o.channel(`user-updates-${j.id}`).on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${j.id}`},a=>{let b=a.new||null;b&&(i(b),f.debug.log("AUTH","User profile updated from DB change",{role:b.role}))}).subscribe();return()=>{o.removeChannel(a)}},[o,j?.id]);let q=async()=>{f.debug.log("AUTH","Logout initiated",{currentUser:h?.email}),i(null),k(null),f.debug.log("AUTH","User state cleared"),await o.auth.signOut(),f.debug.success("AUTH","Supabase signOut complete"),n.push("/"),f.debug.log("AUTH","Redirecting to login..."),n.refresh(),f.debug.log("AUTH","Logout complete")};return(0,b.jsx)(g.Provider,{value:{user:h,supabaseUser:j,setUser:i,logout:q,loading:l},children:a})}function i(){let a=(0,c.useContext)(g);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>h,"useAuth",()=>i])},5784,67552,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>c],5784);let d=(0,b.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>d],67552)},14388,a=>{"use strict";var b=a.i(5050),c=(0,b.createServerReference)("4001860d967ff1d29143ee49c09c9bbdff4d1af8fb",b.callServer,void 0,b.findSourceMapURL,"logAuditEvent");a.s(["logAuditEvent",()=>c])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b8534285._.js.map