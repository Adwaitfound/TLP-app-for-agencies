module.exports=[56051,a=>{"use strict";var b=a.i(37936),c=a.i(98310);async function d(a){try{let b=(0,c.createServiceClient)(),{error:d}=await b.from("users").upsert({id:a.id,email:a.email,full_name:a.full_name||a.email.split("@")[0],role:a.role,company_name:a.company_name||null,status:"client"===a.role?"pending":"approved"},{onConflict:"id"});if(d)return{success:!1,error:d.message};return{success:!0}}catch(a){return{success:!1,error:a?.message||"Unexpected error registering pending user"}}}(0,a.i(13095).ensureServerEntryExports)([d]),(0,b.registerServerReference)(d,"40ccf2a3dde700e871dd0ca51628e0652e1064d905",null),a.s(["registerPendingUser",()=>d])},16172,a=>{"use strict";var b=a.i(74779),c=a.i(56051),d=a.i(37936),e=a.i(98310);async function f(a){let{email:b,password:c,full_name:d,company_name:f,role:g}=a;try{let a=(0,e.createServiceClient)(),{data:h,error:i}=await a.auth.admin.createUser({email:b,password:c,email_confirm:!0,user_metadata:{full_name:d,company_name:f||null,role:g}});if(i)return{success:!1,error:i.message};let j=h?.user?.id;if(!j)return{success:!1,error:"Auth user creation failed"};let{error:k}=await a.from("users").upsert({id:j,email:b,full_name:d,role:g,company_name:f||null,status:"client"===g?"pending":"approved"},{onConflict:"id"});if(k)return{success:!1,error:k.message};return{success:!0,userId:j}}catch(a){return{success:!1,error:a?.message||"Unexpected error during admin signup"}}}(0,a.i(13095).ensureServerEntryExports)([f]),(0,d.registerServerReference)(f,"402c6d535aade73d322b5373083d5b4b6b869c009c",null),a.s([],68560),a.i(68560),a.s(["4001860d967ff1d29143ee49c09c9bbdff4d1af8fb",()=>b.logAuditEvent,"402c6d535aade73d322b5373083d5b4b6b869c009c",()=>f,"40ccf2a3dde700e871dd0ca51628e0652e1064d905",()=>c.registerPendingUser],16172)},85685,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[externals]_crypto_c412f66b._.js"].map(b=>a.l(b))).then(()=>b(54799)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0c6f910e._.js.map