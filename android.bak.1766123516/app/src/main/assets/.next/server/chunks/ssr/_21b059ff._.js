module.exports=[96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},54161,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(97895);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},41675,41710,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>c],41675);let d=(0,b.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>d],41710)},24669,a=>{"use strict";let b=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],24669)},39786,a=>{"use strict";var b=a.i(87924),c=a.i(54161);function d({status:a}){return(0,b.jsx)(c.Badge,{variant:(a=>{switch(a){case"completed":case"done":case"paid":case"active":return"success";case"in_progress":case"in_review":case"sent":return"info";case"planning":case"pending":case"draft":return"warning";case"stuck":case"blocked":case"cancelled":case"overdue":case"inactive":return"destructive";default:return"default"}})(a),children:a.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")})}a.s(["StatusBadge",()=>d])},2150,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50104),e=a.i(30553),f="Progress",[g,h]=(0,d.createContextScope)(f),[i,j]=g(f),k=c.forwardRef((a,c)=>{var d,f;let{__scopeProgress:g,value:h=null,max:j,getValueLabel:k=n,...l}=a;(j||0===j)&&!q(j)&&console.error((d=`${j}`,`Invalid prop \`max\` of value \`${d}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=q(j)?j:100;null===h||r(h,m)||console.error((f=`${h}`,`Invalid prop \`value\` of value \`${f}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let s=r(h,m)?h:null,t=p(s)?k(s,m):void 0;return(0,b.jsx)(i,{scope:g,value:s,max:m,children:(0,b.jsx)(e.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":p(s)?s:void 0,"aria-valuetext":t,role:"progressbar","data-state":o(s,m),"data-value":s??void 0,"data-max":m,...l,ref:c})})});k.displayName=f;var l="ProgressIndicator",m=c.forwardRef((a,c)=>{let{__scopeProgress:d,...f}=a,g=j(l,d);return(0,b.jsx)(e.Primitive.div,{"data-state":o(g.value,g.max),"data-value":g.value??void 0,"data-max":g.max,...f,ref:c})});function n(a,b){return`${Math.round(a/b*100)}%`}function o(a,b){return null==a?"indeterminate":a===b?"complete":"loading"}function p(a){return"number"==typeof a}function q(a){return p(a)&&!isNaN(a)&&a>0}function r(a,b){return p(a)&&!isNaN(a)&&a<=b&&a>=0}m.displayName=l;var s=a.i(97895);let t=c.forwardRef(({className:a,value:c,...d},e)=>(0,b.jsx)(k,{ref:e,className:(0,s.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...d,children:(0,b.jsx)(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(c||0)}%)`}})}));t.displayName=k.displayName,a.s(["Progress",()=>t],2150)},15659,a=>{"use strict";let b=(0,a.i(70106).default)("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]);a.s(["ListTodo",()=>b],15659)},87534,a=>{"use strict";let b=(0,a.i(70106).default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckSquare",()=>b],87534)},84282,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(3130),f=a.i(40695),g=a.i(2150),h=a.i(87682),i=a.i(41675),j=a.i(41710);let k=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var l=a.i(96221),m=a.i(24669),n=a.i(15659),o=a.i(60246),p=a.i(64791),q=a.i(46864),r=a.i(87534),s=a.i(69240),t=a.i(38422),u=a.i(39786);function v(){let a=(0,d.useParams)(),v=(0,d.useRouter)(),{user:w}=(0,t.useAuth)(),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(!1);(0,c.useEffect)(()=>{J()},[a.id]);let J=async()=>{if(!a.id)return;G(!0);let b=(0,s.createClient)();try{let{data:c}=await b.from("projects").select("*, clients(company_name)").eq("id",a.id).single();c&&y(c);let{data:d}=await b.from("milestones").select("*").eq("project_id",a.id).order("due_date",{ascending:!0});d&&A(d);let{data:e}=await b.from("sub_projects").select("*, assigned_user:users!sub_projects_assigned_to_fkey(id, email, full_name)").eq("project_id",a.id);e&&C(e);let{data:f}=await b.from("project_team").select("users(id, email, full_name, role)").eq("project_id",a.id);if(f){let a=f.flatMap(a=>{let b=a.users;return b?Array.isArray(b)?b:[b]:[]});E(a)}}catch(a){console.error("Error loading project details:",a)}finally{G(!1)}},K=async(a,b)=>{I(!0);let c=(0,s.createClient)();try{let{error:d}=await c.from("sub_projects").update({status:b}).eq("id",a);if(!d){C(B.map(c=>c.id===a?{...c,status:b}:c));let d=B.find(b=>b.id===a);d&&d.assigned_to===w?.id&&await c.from("employee_tasks").update({status:b}).eq("project_id",x?.id).eq("user_id",w?.id).eq("title",d.name)}}catch(a){console.error("Error updating status:",a)}finally{I(!1)}};return F?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin"})}):x?(0,b.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto p-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>v.back(),children:(0,b.jsx)(k,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:x.name}),(0,b.jsx)(u.StatusBadge,{status:x.status})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Client: ",x.clients?.company_name||"No client"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:"Project Overview"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[x.start_date&&(0,b.jsxs)("div",{className:"p-3 rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[(0,b.jsx)(i.Calendar,{className:"h-3 w-3"}),"Start Date"]}),(0,b.jsx)("p",{className:"font-semibold",children:new Date(x.start_date).toLocaleDateString()})]}),x.deadline&&(0,b.jsxs)("div",{className:"p-3 rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[(0,b.jsx)(j.Clock,{className:"h-3 w-3"}),"Deadline"]}),(0,b.jsx)("p",{className:"font-semibold",children:new Date(x.deadline).toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"p-3 rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[(0,b.jsx)(m.TrendingUp,{className:"h-3 w-3"}),"Progress"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Progress,{value:x.progress_percentage,className:"h-2 flex-1"}),(0,b.jsxs)("span",{className:"font-semibold text-sm",children:[x.progress_percentage,"%"]})]})]})]})]}),x.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Description"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:x.description})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,b.jsx)(n.ListTodo,{className:"h-4 w-4"}),"Sub-Projects / Tasks"]})}),B.length>0?(0,b.jsx)("div",{className:"space-y-2",children:B.map(a=>(0,b.jsx)(e.Card,{className:"hover:border-primary/50 transition-colors",children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h4",{className:"font-medium",children:a.name}),(0,b.jsx)(u.StatusBadge,{status:a.status})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a.description}),a.video_url&&(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("a",{href:a.video_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[(0,b.jsx)(p.Video,{className:"h-3 w-3"}),"View Video"]})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[a.assigned_user&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.UserCheck,{className:"h-3 w-3"}),a.assigned_user.full_name||a.assigned_user.email]}),a.due_date&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(i.Calendar,{className:"h-3 w-3"}),new Date(a.due_date).toLocaleDateString()]})]})]}),a.assigned_to===w?.id&&(0,b.jsxs)(h.Select,{value:a.status,onValueChange:b=>K(a.id,b),disabled:H,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[130px]",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"planning",children:"Planning"}),(0,b.jsx)(h.SelectItem,{value:"in_progress",children:"In Progress"}),(0,b.jsx)(h.SelectItem,{value:"in_review",children:"In Review"}),(0,b.jsx)(h.SelectItem,{value:"completed",children:"Completed"}),(0,b.jsx)(h.SelectItem,{value:"stuck",children:"Stuck"})]})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Progress,{value:a.progress_percentage,className:"h-2 flex-1"}),(0,b.jsxs)("span",{className:"text-xs font-medium w-10 text-right",children:[a.progress_percentage,"%"]})]})})]})})},a.id))}):(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,b.jsx)(n.ListTodo,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No tasks yet for this project."]})})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Milestones"})}),z.length>0?(0,b.jsx)("div",{className:"space-y-2",children:z.map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h4",{className:"font-medium",children:a.title}),(0,b.jsx)(u.StatusBadge,{status:a.status})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a.description}),a.due_date&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Due: ",new Date(a.due_date).toLocaleDateString()]})]})})})},a.id))}):(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,b.jsx)(r.CheckSquare,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No milestones yet for this project."]})})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,b.jsx)("h3",{className:"font-semibold",children:"Team Members"})}),D.length>0?(0,b.jsx)("div",{className:"space-y-2",children:D.map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-sm font-medium",children:a.full_name?.charAt(0)||a.email.charAt(0)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.full_name||a.email}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:a.role?.replace("_"," ")})]})]})})},a.id))}):(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,b.jsx)(o.Users,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No team members assigned yet."]})})})]})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen gap-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Project not found"}),(0,b.jsx)(f.Button,{onClick:()=>v.back(),children:"Go Back"})]})}a.s(["default",()=>v],84282)}];

//# sourceMappingURL=_21b059ff._.js.map