{"version":3,"sources":["../../../../app/actions/force-confirm-email.ts","../../../../app/actions/employee-tasks.ts","../../../../.next-internal/server/app/dashboard/page/actions.js%20%28server%20actions%20loader%29","../../../../app/actions/approve-user.ts","../../../../app/actions/grant-admin.ts"],"sourcesContent":["'use server'\n\nimport { createServiceClient } from '@/lib/supabase/server'\n\nexport async function forceConfirmEmail(email: string) {\n    try {\n        const supabase = createServiceClient()\n        // Find user id in our users table\n        const { data, error } = await supabase\n            .from('users')\n            .select('id, email, status, role')\n            .eq('email', email)\n            .limit(1)\n            .single()\n\n        if (error) {\n            return { success: false, error: error.message }\n        }\n        let targetUserId = data?.id\n\n        // If not found in users table, fallback to admin listUsers and match by email\n        if (!targetUserId) {\n            const { data: listData, error: listError } = await (supabase as any).auth.admin.listUsers({ perPage: 200 })\n            if (listError) {\n                return { success: false, error: listError.message }\n            }\n            const match = listData?.users?.find((u: any) => (u?.email || '').toLowerCase() === email.toLowerCase())\n            if (!match?.id) {\n                return { success: false, error: 'User not found for provided email' }\n            }\n            targetUserId = match.id\n        }\n\n        const { error: confirmError } = await (supabase as any).auth.admin.updateUserById(targetUserId, {\n            email_confirm: true,\n        })\n        if (confirmError) {\n            return { success: false, error: confirmError.message }\n        }\n\n        return { success: true, userId: targetUserId }\n    } catch (err: any) {\n        return { success: false, error: err?.message || 'Unexpected error while confirming email' }\n    }\n}\n","\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\nimport { revalidatePath } from \"next/cache\"\nimport { logAuditEvent } from \"./audit-log\"\n\nexport async function createTask(data: {\n    title: string\n    description?: string\n    project_id?: string\n    proposed_project_name?: string\n    proposed_project_vertical?: 'video_production' | 'social_media' | 'design_branding'\n    priority?: 'low' | 'medium' | 'high' | 'urgent'\n    due_date?: string\n    estimated_hours?: number\n}) {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        return { error: \"Unauthorized\" }\n    }\n\n    console.log('[createTask] Creating task for user:', user.id, user.email, 'Data:', data)\n\n    const payload: any = {\n        user_id: user.id,\n        title: data.title,\n        description: data.description,\n        priority: data.priority,\n        due_date: data.due_date,\n        estimated_hours: data.estimated_hours,\n        project_id: data.project_id,\n    }\n\n    // Only add proposal fields if proposing a new project\n    if (!data.project_id && data.proposed_project_name) {\n        payload.proposed_project_name = data.proposed_project_name\n        // Only set vertical if it's not empty string\n        if (data.proposed_project_vertical && data.proposed_project_vertical.trim()) {\n            payload.proposed_project_vertical = data.proposed_project_vertical\n        }\n        payload.proposed_project_status = 'pending'\n        console.log('[createTask] Setting proposed project status to pending')\n    }\n\n    const { data: task, error } = await supabase\n        .from('employee_tasks')\n        .insert(payload)\n        .select()\n        .single()\n\n    console.log('[createTask] Result:', { task, error })\n\n    if (error) {\n        console.error(\"Create task error:\", error)\n\n        // Log the failure\n        await logAuditEvent({\n            action: 'create',\n            entityType: 'task',\n            entityName: data.title,\n            status: 'error',\n            errorMessage: error.message,\n            details: { ...data },\n        }).catch(e => console.warn('Failed to log audit event:', e))\n\n        return { error: error.message }\n    }\n\n    // Log successful task creation\n    await logAuditEvent({\n        action: 'create',\n        entityType: 'task',\n        entityId: task.id,\n        entityName: task.title,\n        status: 'success',\n        newValues: {\n            title: task.title,\n            project_id: task.project_id,\n            proposed_project_name: task.proposed_project_name,\n            proposed_project_vertical: task.proposed_project_vertical,\n            priority: task.priority,\n        },\n        details: {\n            description: task.description,\n            due_date: task.due_date,\n            is_proposal: !!task.proposed_project_name,\n        },\n    }).catch(e => console.warn('Failed to log audit event:', e))\n\n    revalidatePath('/dashboard/employee')\n    return { data: task }\n}\n\nexport async function updateTask(taskId: string, updates: {\n    title?: string\n    description?: string\n    priority?: 'low' | 'medium' | 'high' | 'urgent'\n    status?: 'todo' | 'in_progress' | 'blocked' | 'completed' | 'cancelled'\n    due_date?: string\n    estimated_hours?: number\n    actual_hours?: number\n}) {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        return { error: \"Unauthorized\" }\n    }\n\n    const updateData: any = { ...updates }\n\n    // Set completed_at when marking as completed\n    if (updates.status === 'completed') {\n        updateData.completed_at = new Date().toISOString()\n    }\n\n    const { data: task, error } = await supabase\n        .from('employee_tasks')\n        .update(updateData)\n        .eq('id', taskId)\n        .eq('user_id', user.id)\n        .select()\n        .single()\n\n    if (error) {\n        console.error(\"Update task error:\", error)\n        return { error: error.message }\n    }\n\n    revalidatePath('/dashboard/employee')\n    return { data: task }\n}\n\nexport async function deleteTask(taskId: string) {\n    console.log('[deleteTask] ðŸ”µ START - TaskID:', taskId)\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        console.log('[deleteTask] âŒ AUTH FAILED:', authError)\n        return { error: \"Unauthorized\" }\n    }\n    console.log('[deleteTask] âœ… Auth user:', user.id)\n\n    console.log('[deleteTask] Attempting delete from employee_tasks where id=' + taskId + ' AND user_id=' + user.id)\n    const { error } = await supabase\n        .from('employee_tasks')\n        .delete()\n        .eq('id', taskId)\n        .eq('user_id', user.id)\n\n    if (error) {\n        console.error('[deleteTask] âŒ Delete error:', error)\n\n        // Log the failure\n        await logAuditEvent({\n            action: 'delete',\n            entityType: 'task',\n            entityId: taskId,\n            status: 'error',\n            errorMessage: error.message,\n        }).catch(e => console.warn('Failed to log audit event:', e))\n\n        return { error: error.message }\n    }\n\n    console.log('[deleteTask] âœ… Task deleted successfully')\n\n    // Log successful deletion\n    await logAuditEvent({\n        action: 'delete',\n        entityType: 'task',\n        entityId: taskId,\n        status: 'success',\n    }).catch(e => console.warn('Failed to log audit event:', e))\n\n    revalidatePath('/dashboard/employee')\n    console.log('[deleteTask] âœ… Path revalidated')\n    return { success: true }\n}\n\nexport async function getTasks(filter?: {\n    status?: string\n    priority?: string\n    project_id?: string\n}) {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        return { error: \"Unauthorized\" }\n    }\n\n    let query = supabase\n        .from('employee_tasks')\n        .select('*, projects(name)')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false })\n\n    if (filter?.status) {\n        query = query.eq('status', filter.status)\n    }\n    if (filter?.priority) {\n        query = query.eq('priority', filter.priority)\n    }\n    if (filter?.project_id) {\n        query = query.eq('project_id', filter.project_id)\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n        console.error(\"Get tasks error:\", error)\n        return { error: error.message }\n    }\n\n    return { data }\n}\n\nexport async function getTodayTasks() {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        console.error('[getTodayTasks] Auth error:', authError)\n        return { error: \"Unauthorized\" }\n    }\n\n    console.log('[getTodayTasks] User ID:', user.id, 'Email:', user.email)\n\n    // Get user profile to check role\n    const { data: profile, error: profileError } = await supabase\n        .from('profiles')\n        .select('role')\n        .eq('id', user.id)\n        .single()\n\n    console.log('[getTodayTasks] User role:', profile?.role, 'Profile error:', profileError)\n\n    const today = new Date().toISOString().split('T')[0]\n\n    let query = supabase\n        .from('employee_tasks')\n        .select('*, projects(name)')\n\n    // Only filter by user_id if the user is an employee\n    // Admins and clients can see all tasks\n    const isEmployee = profile?.role === 'employee'\n    console.log('[getTodayTasks] Is employee:', isEmployee, 'Will filter by user_id:', isEmployee)\n\n    if (isEmployee) {\n        query = query.eq('user_id', user.id)\n    }\n\n    // Get active tasks (not completed/cancelled)\n    const activeQuery = query\n        .neq('status', 'completed')\n        .neq('status', 'cancelled')\n\n    const { data: activeTasks, error: activeError } = await activeQuery\n\n    // Also get any tasks with proposals (pending, approved, or rejected) so employees can track them\n    let proposalQuery = supabase\n        .from('employee_tasks')\n        .select('*, projects(name)')\n        .not('proposed_project_status', 'is', null)  // Get any task with a proposal status\n\n    if (isEmployee) {\n        proposalQuery = proposalQuery.eq('user_id', user.id)\n    }\n\n    const { data: proposalTasks, error: proposalError } = await proposalQuery\n\n    // Merge the two arrays, removing duplicates\n    const taskMap = new Map()\n    activeTasks?.forEach(t => taskMap.set(t.id, t))\n    proposalTasks?.forEach(t => taskMap.set(t.id, t))\n    const data = Array.from(taskMap.values())\n        .sort((a, b) => {\n            // Sort by priority first, then by due date\n            const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3 }\n            const priorityDiff = (priorityOrder[a.priority as keyof typeof priorityOrder] ?? 2) -\n                (priorityOrder[b.priority as keyof typeof priorityOrder] ?? 2)\n            if (priorityDiff !== 0) return priorityDiff\n            return (a.due_date || '').localeCompare(b.due_date || '')\n        })\n\n    const error = activeError || proposalError\n    console.log('[getTodayTasks] Query result: active tasks:', activeTasks?.length, 'proposal tasks:', proposalTasks?.length, 'merged:', data.length, { error, data })\n\n    if (error) {\n        console.error(\"Get today tasks error:\", error)\n        return { error: error.message }\n    }\n\n    return { data }\n}\n\nexport async function getOverdueTasks() {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        return { error: \"Unauthorized\" }\n    }\n\n    // Get user profile to check role\n    const { data: profile } = await supabase\n        .from('profiles')\n        .select('role')\n        .eq('id', user.id)\n        .single()\n\n    const today = new Date().toISOString().split('T')[0]\n\n    let query = supabase\n        .from('employee_tasks')\n        .select('*, projects(name)')\n        .lt('due_date', today)\n        .neq('status', 'completed')\n        .neq('status', 'cancelled')\n\n    // Only filter by user_id if the user is an employee\n    if (profile?.role === 'employee') {\n        query = query.eq('user_id', user.id)\n    }\n\n    query = query.order('due_date', { ascending: true })\n\n    const { data, error } = await query\n\n    console.log('[getOverdueTasks] Query result:', { count: data?.length, data })\n\n    if (error) {\n        console.error(\"Get overdue tasks error:\", error)\n        return { error: error.message }\n    }\n\n    return { data }\n}\n\nexport async function assignTaskToEmployee(data: {\n    employee_id: string\n    title: string\n    description?: string\n    project_id?: string\n    proposed_project_name?: string\n    priority?: 'low' | 'medium' | 'high' | 'urgent'\n    due_date?: string\n    estimated_hours?: number\n}) {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        return { error: \"Unauthorized\" }\n    }\n\n    // Check if admin or project manager\n    const { data: userData, error: userError } = await supabase\n        .from('users')\n        .select('role')\n        .eq('id', user.id)\n        .single()\n\n    if (userError || !userData) {\n        return { error: \"Failed to verify permissions\" }\n    }\n\n    if (userData.role !== 'admin' && userData.role !== 'project_manager') {\n        return { error: \"Only admins and project managers can assign tasks\" }\n    }\n\n    const payload: any = {\n        user_id: data.employee_id,\n        title: data.title,\n        description: data.description,\n        project_id: data.project_id,\n        proposed_project_name: data.proposed_project_name,\n        priority: data.priority || 'medium',\n        due_date: data.due_date,\n        estimated_hours: data.estimated_hours,\n    }\n\n    if (!data.project_id && data.proposed_project_name) {\n        payload.proposed_project_status = 'pending'\n    }\n\n    const { data: task, error } = await supabase\n        .from('employee_tasks')\n        .insert(payload)\n        .select()\n        .single()\n\n    if (error) {\n        console.error(\"Assign task error:\", error)\n        return { error: error.message }\n    }\n\n    revalidatePath('/dashboard/employee')\n    return { data: task }\n}\n\nexport async function getPendingProjectProposals() {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        return { error: \"Unauthorized\" }\n    }\n\n    const { data: roleData, error: roleError } = await supabase\n        .from('users')\n        .select('role')\n        .eq('id', user.id)\n        .single()\n\n    if (roleError || !roleData || (roleData.role !== 'admin' && roleData.role !== 'project_manager')) {\n        return { error: \"Only admins and project managers can view proposals\" }\n    }\n\n    const { data, error } = await supabase\n        .from('employee_tasks')\n        .select('id, title, description, proposed_project_name, proposed_project_vertical, proposed_project_status, proposed_project_notes, user_id, created_at, users:users!employee_tasks_user_id_fkey(full_name, email), project_id, projects(name)')\n        .not('proposed_project_name', 'is', null)\n        .eq('proposed_project_status', 'pending')\n        .order('created_at', { ascending: false })\n\n    if (error) {\n        console.error('Get pending proposals error:', error)\n        return { error: error.message }\n    }\n\n    return { data }\n}\n\nexport async function reviewProjectProposal(args: {\n    taskId: string\n    decision: 'approved' | 'rejected'\n    projectId?: string\n    notes?: string\n}) {\n    console.log('[reviewProjectProposal] ðŸ”µ START - Decision:', args.decision, 'TaskID:', args.taskId, 'ProjectID:', args.projectId)\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        console.log('[reviewProjectProposal] âŒ AUTH FAILED:', authError)\n        return { error: \"Unauthorized\" }\n    }\n    console.log('[reviewProjectProposal] âœ… Auth user:', user.id, user.email)\n\n    const { data: roleData, error: roleError } = await supabase\n        .from('users')\n        .select('role')\n        .eq('id', user.id)\n        .single()\n\n    if (roleError || !roleData || (roleData.role !== 'admin' && roleData.role !== 'project_manager')) {\n        console.log('[reviewProjectProposal] âŒ ROLE CHECK FAILED:', roleData?.role)\n        return { error: \"Only admins and project managers can review proposals\" }\n    }\n    console.log('[reviewProjectProposal] âœ… Role check passed:', roleData.role)\n\n    const updateData: any = {\n        proposed_project_status: args.decision,\n        proposed_project_reviewed_by: user.id,\n        proposed_project_reviewed_at: new Date().toISOString(),\n        proposed_project_notes: args.notes,\n    }\n\n    // If approving and no project_id provided, create a new project\n    if (args.decision === 'approved' && !args.projectId) {\n        console.log('[reviewProjectProposal] ðŸ”· CREATING NEW PROJECT FROM PROPOSAL')\n\n        // First, fetch the task to get the proposal details AND employee info\n        const { data: task, error: taskError } = await supabase\n            .from('employee_tasks')\n            .select('proposed_project_name, proposed_project_vertical, user_id')\n            .eq('id', args.taskId)\n            .single()\n\n        console.log('[reviewProjectProposal] Task fetch:', { error: taskError, task: task })\n        if (taskError || !task) {\n            console.log('[reviewProjectProposal] âŒ TASK FETCH FAILED')\n            return { error: \"Failed to fetch task details\" }\n        }\n        console.log('[reviewProjectProposal] âœ… Task fetched - Name:', task.proposed_project_name, 'Vertical:', task.proposed_project_vertical, 'Employee:', task.user_id)\n\n        // Create a new project from the proposal\n        console.log('[reviewProjectProposal] ðŸ”¶ Attempting to create project with:', {\n            name: task.proposed_project_name,\n            service_type: task.proposed_project_vertical || 'video_production',\n            status: 'planning',\n            created_by: user.id\n        })\n\n        const { data: newProject, error: projectError } = await supabase\n            .from('projects')\n            .insert({\n                name: task.proposed_project_name,\n                service_type: task.proposed_project_vertical || 'video_production',\n                status: 'planning',\n                progress_percentage: 0,\n                created_by: user.id,\n                // client_id can be null initially - project created from proposal doesn't need a client yet\n            })\n            .select()\n            .single()\n\n        console.log('[reviewProjectProposal] Project insert result:', { error: projectError, newProject: newProject })\n\n        if (projectError) {\n            console.error('[reviewProjectProposal] âŒ Project creation failed:', projectError)\n            // Continue with approval even if project creation fails\n            // return { error: projectError.message }\n        } else if (newProject) {\n            console.log('[reviewProjectProposal] âœ… Project created successfully! ID:', newProject.id)\n            updateData.project_id = newProject.id\n            console.log('[reviewProjectProposal] Updated updateData.project_id =', newProject.id)\n\n            // Add both the admin and the employee to the project team\n            console.log('[reviewProjectProposal] ðŸ”· Adding team members to project:', newProject.id)\n            console.log('[reviewProjectProposal] Team members to add:', [\n                { project_id: newProject.id, user_id: user.id, role: 'Admin who approved' },\n                { project_id: newProject.id, user_id: task.user_id, role: 'Employee who requested' }\n            ])\n\n            try {\n                const teamMembers = [\n                    { project_id: newProject.id, user_id: user.id },  // Admin who approved\n                    { project_id: newProject.id, user_id: task.user_id }  // Employee who requested\n                ]\n\n                const { error: teamError, data: teamData } = await supabase\n                    .from('project_team')\n                    .insert(teamMembers)\n                    .select()\n\n                console.log('[reviewProjectProposal] Team insert result:', { error: teamError, data: teamData })\n\n                if (teamError) {\n                    console.error('[reviewProjectProposal] âŒ Failed to add team members:', teamError)\n                } else {\n                    console.log('[reviewProjectProposal] âœ… Team members added successfully! Rows:', teamData?.length)\n                }\n            } catch (err) {\n                console.error('[reviewProjectProposal] âŒ Error adding team members:', err)\n            }\n        }\n    } else if (args.projectId && args.decision === 'approved') {\n        console.log('[reviewProjectProposal] ðŸ”· Linking existing project:', args.projectId)\n        updateData.project_id = args.projectId\n    }\n\n    const { data, error } = await supabase\n        .from('employee_tasks')\n        .update(updateData)\n        .eq('id', args.taskId)\n        .select()\n        .single()\n\n    if (error) {\n        console.error('Review proposal error:', error)\n\n        // Log the failure\n        await logAuditEvent({\n            action: args.decision === 'approved' ? 'approve' : 'reject',\n            entityType: 'proposal',\n            entityId: args.taskId,\n            status: 'error',\n            errorMessage: error.message,\n            details: { decision: args.decision, notes: args.notes },\n        }).catch(e => console.warn('Failed to log audit event:', e))\n\n        return { error: error.message }\n    }\n\n    // Log successful approval/rejection\n    await logAuditEvent({\n        action: args.decision === 'approved' ? 'approve' : 'reject',\n        entityType: 'proposal',\n        entityId: args.taskId,\n        status: 'success',\n        newValues: updateData,\n        details: {\n            decision: args.decision,\n            notes: args.notes,\n            project_created: !!data?.project_id,\n        },\n    }).catch(e => console.warn('Failed to log audit event:', e))\n\n    revalidatePath('/dashboard')\n    revalidatePath('/dashboard/employee')\n    return { data }\n}\n\nexport async function debugAllUserTasks() {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n    if (authError || !user) {\n        return { error: \"Unauthorized\" }\n    }\n\n    // Get ALL tasks for this user without any filters\n    const { data, error } = await supabase\n        .from('employee_tasks')\n        .select('id, title, status, proposed_project_name, proposed_project_status, user_id, created_at')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false })\n\n    console.log('[debugAllUserTasks] ALL tasks for user', user.id, ':', { count: data?.length, data, error })\n\n    return { data, error }\n}\n","export {logAuditEvent as '4001860d967ff1d29143ee49c09c9bbdff4d1af8fb'} from 'ACTIONS_MODULE0'\nexport {reviewProjectProposal as '40e9debad081e2ea61fef36767d769afdc486d2864'} from 'ACTIONS_MODULE1'\nexport {approveUserAccount as '407d00f69ec1463aaf4cba7dfeb078331c034b7beb'} from 'ACTIONS_MODULE2'\nexport {grantAdminByEmail as '40562833b8610881280abfc4553d749f1e50b42e3d'} from 'ACTIONS_MODULE3'\nexport {forceConfirmEmail as '407dfc82b3267d99c51cea5a0a0ab48bad3c28a250'} from 'ACTIONS_MODULE4'\n","'use server'\n\nimport { createServiceClient } from '@/lib/supabase/server'\n\nexport async function approveUserAccount(params: { userId: string; decision: 'approved' | 'rejected' }) {\n    const { userId, decision } = params\n\n    try {\n        const supabase = createServiceClient()\n\n        // Fetch user context first\n        const { data: userData, error: userError } = await supabase\n            .from('users')\n            .select('id, email, full_name, role, company_name, status')\n            .eq('id', userId)\n            .single()\n\n        if (userError || !userData) {\n            return { success: false, error: 'User not found or cannot be fetched' }\n        }\n\n        // Update status\n        const { error: updateError } = await supabase\n            .from('users')\n            .update({ status: decision })\n            .eq('id', userId)\n\n        if (updateError) {\n            return { success: false, error: updateError.message }\n        }\n\n        // If approved and client, ensure clients row exists\n        if (decision === 'approved' && userData.role === 'client') {\n            const { data: existingClient, error: clientFetchError } = await supabase\n                .from('clients')\n                .select('id')\n                .eq('user_id', userId)\n                .maybeSingle()\n\n            if (!clientFetchError && !existingClient) {\n                const companyName = userData.company_name || userData.full_name || userData.email\n                const contactPerson = userData.full_name || userData.email\n\n                const { error: insertError } = await supabase.from('clients').insert({\n                    user_id: userId,\n                    company_name: companyName,\n                    contact_person: contactPerson,\n                    email: userData.email,\n                    phone: null,\n                    address: '',\n                    status: 'active',\n                    total_projects: 0,\n                    total_revenue: 0,\n                })\n\n                if (insertError) {\n                    return { success: false, error: `Client creation failed: ${insertError.message}` }\n                }\n            }\n        }\n\n        return { success: true }\n    } catch (err: any) {\n        return { success: false, error: err?.message || 'Unexpected error approving user' }\n    }\n}\n","'use server'\n\nimport { createServiceClient } from '@/lib/supabase/server'\n\nexport async function grantAdminByEmail(email: string) {\n    if (!email || !email.includes('@')) {\n        return { success: false, error: 'Provide a valid email.' }\n    }\n\n    try {\n        const supabase = createServiceClient()\n\n        const { data: user, error: fetchError } = await supabase\n            .from('users')\n            .select('id, email, role, status')\n            .eq('email', email)\n            .maybeSingle()\n\n        if (fetchError) {\n            return { success: false, error: fetchError.message }\n        }\n        if (!user) {\n            return { success: false, error: 'No user found for that email.' }\n        }\n\n        const { error: updateError } = await supabase\n            .from('users')\n            .update({ role: 'admin', status: 'approved' })\n            .eq('id', user.id)\n\n        if (updateError) {\n            return { success: false, error: updateError.message }\n        }\n\n        return { success: true }\n    } catch (err: any) {\n        return { success: false, error: err?.message || 'Unexpected error' }\n    }\n}\n"],"names":[],"mappings":"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"}