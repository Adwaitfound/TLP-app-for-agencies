{"version":3,"sources":["../../../../app/dashboard/invoices/page.tsx","../../../../app/actions/data%3Ae06e8d%20%3Ctext/javascript%3E","../../../../app/actions/data%3Ae23ef6%20%3Ctext/javascript%3E","../../../../app/actions/data%3A0894fd%20%3Ctext/javascript%3E","../../../../app/actions/data%3Adafa27%20%3Ctext/javascript%3E","../../../../app/actions/data%3Acfbabc%20%3Ctext/javascript%3E"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useRef, useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\"\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogFooter,\n    DialogHeader,\n    DialogTitle,\n} from \"@/components/ui/dialog\"\nimport {\n    Table,\n    TableBody,\n    TableCell,\n    TableHead,\n    TableHeader,\n    TableRow,\n} from \"@/components/ui/table\"\nimport { Eye, FileText, Loader2, Plus, Trash2, Download } from \"lucide-react\"\nimport type { Client, Project } from \"@/types\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { useAuth } from \"@/contexts/auth-context\"\nimport { uploadInvoiceFile } from \"@/app/actions/upload-invoice\"\nimport { fetchInvoicesData, updateInvoiceStatus, deleteInvoice, getSignedInvoiceUrl } from \"@/app/actions/invoice-operations\"\n\ninterface Invoice {\n    id: string\n    invoice_number: string\n    client_id: string\n    project_id?: string\n    invoice_file_url: string\n    created_at: string\n    status: \"draft\" | \"sent\" | \"paid\" | \"overdue\" | \"cancelled\"\n    clients?: { company_name: string }\n    projects?: { name: string }\n}\n\ntype StatusKey = Invoice[\"status\"]\n\nconst statusConfig: Record<StatusKey, { label: string; variant: \"secondary\" | \"default\" | \"destructive\" }> = {\n    draft: { label: \"Draft\", variant: \"secondary\" },\n    sent: { label: \"Sent\", variant: \"default\" },\n    paid: { label: \"Paid\", variant: \"default\" },\n    overdue: { label: \"Overdue\", variant: \"destructive\" },\n    cancelled: { label: \"Cancelled\", variant: \"secondary\" },\n}\n\nexport default function InvoicesPage() {\n    const { user, loading: authLoading } = useAuth()\n    const [invoices, setInvoices] = useState<Invoice[]>([])\n    const [clients, setClients] = useState<Client[]>([])\n    const [projects, setProjects] = useState<Project[]>([])\n    const [loading, setLoading] = useState(true)\n    const [isDialogOpen, setIsDialogOpen] = useState(false)\n    const [submitting, setSubmitting] = useState(false)\n    const isSubmittingRef = useRef(false)\n    const toastTimerRef = useRef<NodeJS.Timeout | null>(null)\n    const [toast, setToast] = useState<{ message: string; type: \"success\" | \"error\" } | null>(null)\n\n    const [selectedFile, setSelectedFile] = useState<File | null>(null)\n    const [selectedClientId, setSelectedClientId] = useState(\"\")\n    const [selectedProjectId, setSelectedProjectId] = useState(\"\")\n    const [invoiceNumber, setInvoiceNumber] = useState(\"\")\n\n    const isAdwait = user?.email === \"adwait@thelostproject.in\"\n\n    function showToast(message: string, type: \"success\" | \"error\" = \"success\") {\n        if (toastTimerRef.current) clearTimeout(toastTimerRef.current)\n        setToast({ message, type })\n        toastTimerRef.current = setTimeout(() => setToast(null), 3000)\n    }\n\n    useEffect(() => {\n        if (authLoading) return\n        if (!isAdwait) {\n            setLoading(false)\n            return\n        }\n        void fetchData()\n    }, [authLoading, isAdwait])\n\n    const filteredProjects = projects.filter(project => !selectedClientId || project.client_id === selectedClientId)\n\n    async function openSignedUrl(fileUrl: string, download?: boolean) {\n        const result = await getSignedInvoiceUrl(fileUrl)\n        if (result.error || !result.signedUrl) {\n            showToast(result.error || \"Unable to generate signed URL\", \"error\")\n            return\n        }\n        if (download) {\n            const a = document.createElement(\"a\")\n            a.href = result.signedUrl\n            a.download = \"invoice.pdf\"\n            document.body.appendChild(a)\n            a.click()\n            document.body.removeChild(a)\n            showToast(\"Download started\", \"success\")\n        } else {\n            window.open(result.signedUrl, \"_blank\")\n            showToast(\"Opening invoice\", \"success\")\n        }\n    }\n\n    async function fetchData() {\n        setLoading(true)\n        try {\n            const result = await fetchInvoicesData()\n            if (result.error) {\n                console.error(\"Fetch error:\", result.error)\n                throw new Error(result.error)\n            }\n            setInvoices(result.invoices || [])\n            setClients(result.clients || [])\n            setProjects(result.projects || [])\n        } catch (error: any) {\n            console.error(\"Error loading invoices:\", error)\n            showToast(error.message || \"Failed to load invoices\", \"error\")\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    async function handleSubmit(e: React.FormEvent) {\n        e.preventDefault()\n\n        if (!isAdwait) {\n            alert(\"Access restricted to adwait@thelostproject.in\")\n            return\n        }\n\n        if (isSubmittingRef.current) return\n        if (!selectedFile) {\n            alert(\"Please select an invoice PDF to upload\")\n            return\n        }\n        if (!selectedClientId || !invoiceNumber.trim()) {\n            alert(\"Please fill in all required fields\")\n            return\n        }\n        if (!selectedFile.name.toLowerCase().endsWith(\".pdf\")) {\n            alert(\"Please upload a PDF file\")\n            return\n        }\n\n        isSubmittingRef.current = true\n        setSubmitting(true)\n        const supabase = createClient()\n\n        try {\n            // Upload file via server action\n            const formData = new FormData()\n            formData.append(\"file\", selectedFile)\n            formData.append(\"invoiceNumber\", invoiceNumber)\n\n            const uploadResult = await uploadInvoiceFile(formData)\n            if (!uploadResult.success || uploadResult.error) {\n                throw new Error(uploadResult.error || \"Upload failed\")\n            }\n\n            const { publicUrl } = uploadResult\n\n            const today = new Date().toISOString().split(\"T\")[0]\n            const { data, error } = await supabase\n                .from(\"invoices\")\n                .insert({\n                    client_id: selectedClientId,\n                    project_id: selectedProjectId || null,\n                    invoice_number: invoiceNumber,\n                    invoice_file_url: publicUrl,\n                    issue_date: today,\n                    due_date: today,\n                    status: \"draft\",\n                })\n                .select(\"*, clients(company_name), projects(name)\")\n                .single()\n\n            if (error) {\n                console.error(\"DB insert error details:\", error)\n                throw error\n            }\n            if (data) setInvoices(prev => [data, ...prev])\n\n            showToast(\"Invoice uploaded\", \"success\")\n\n            setIsDialogOpen(false)\n            setSelectedFile(null)\n            setSelectedClientId(\"\")\n            setSelectedProjectId(\"\")\n            setInvoiceNumber(\"\")\n        } catch (error: any) {\n            console.error(\"Error uploading invoice:\", error)\n            showToast(error.message || \"Failed to upload invoice\", \"error\")\n        } finally {\n            setSubmitting(false)\n            isSubmittingRef.current = false\n        }\n    }\n\n    async function handleDelete(invoiceId: string, fileUrl: string) {\n        if (!confirm(\"Are you sure you want to delete this invoice?\")) return\n\n        try {\n            const result = await deleteInvoice(invoiceId, fileUrl)\n            if (result.error) {\n                throw new Error(result.error)\n            }\n            setInvoices(prev => prev.filter(inv => inv.id !== invoiceId))\n            showToast(\"Invoice deleted\", \"success\")\n        } catch (error: any) {\n            console.error(\"Error deleting invoice:\", error)\n            showToast(error.message || \"Failed to delete invoice\", \"error\")\n        }\n    }\n\n    if (authLoading) {\n        return (\n            <div className=\"flex h-96 items-center justify-center\">\n                <p className=\"text-muted-foreground\">Loading...</p>\n            </div>\n        )\n    }\n\n    if (!isAdwait) {\n        return (\n            <div className=\"flex h-96 items-center justify-center\">\n                <div className=\"max-w-md space-y-2 text-center\">\n                    <h2 className=\"text-xl font-semibold\">Access restricted</h2>\n                    <p className=\"text-muted-foreground text-sm\">Only adwait@thelostproject.in can manage invoices here.</p>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            {toast ? (\n                <div\n                    className={`fixed bottom-4 right-4 z-50 rounded-md px-4 py-3 shadow-lg text-sm text-white ${toast.type === \"success\" ? \"bg-green-600\" : \"bg-red-600\"}`}\n                    role=\"status\"\n                >\n                    {toast.message}\n                </div>\n            ) : null}\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h2 className=\"text-3xl font-bold tracking-tight\">Invoices</h2>\n                    <p className=\"text-muted-foreground\">Upload and manage client invoices</p>\n                </div>\n                <Button onClick={() => setIsDialogOpen(true)}>\n                    <Plus className=\"mr-2 h-4 w-4\" />\n                    Upload Invoice\n                </Button>\n            </div>\n\n            <div className=\"grid gap-4 md:grid-cols-3\">\n                <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">Total Invoices</CardTitle>\n                        <FileText className=\"h-4 w-4 text-muted-foreground\" />\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"text-2xl font-bold\">{invoices.length}</div>\n                    </CardContent>\n                </Card>\n            </div>\n\n            <Card>\n                <CardHeader>\n                    <CardTitle>All Invoices</CardTitle>\n                    <CardDescription>View and manage uploaded invoices</CardDescription>\n                </CardHeader>\n                <CardContent>\n                    {loading ? (\n                        <div className=\"flex items-center justify-center py-8\">\n                            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n                        </div>\n                    ) : invoices.length === 0 ? (\n                        <div className=\"py-12 text-center\">\n                            <FileText className=\"mx-auto mb-4 h-12 w-12 text-muted-foreground opacity-50\" />\n                            <p className=\"text-muted-foreground\">No invoices uploaded yet</p>\n                        </div>\n                    ) : (\n                        <Table>\n                            <TableHeader>\n                                <TableRow>\n                                    <TableHead>Invoice #</TableHead>\n                                    <TableHead>Client</TableHead>\n                                    <TableHead>Project</TableHead>\n                                    <TableHead>Status</TableHead>\n                                    <TableHead>Uploaded</TableHead>\n                                    <TableHead className=\"text-right\">Actions</TableHead>\n                                </TableRow>\n                            </TableHeader>\n                            <TableBody>\n                                {invoices.map(invoice => (\n                                    <TableRow key={invoice.id}>\n                                        <TableCell className=\"font-medium\">{invoice.invoice_number}</TableCell>\n                                        <TableCell>{invoice.clients?.company_name}</TableCell>\n                                        <TableCell>\n                                            {invoice.projects?.name || <span className=\"text-muted-foreground\">â€”</span>}\n                                        </TableCell>\n                                        <TableCell>\n                                            <Select\n                                                value={invoice.status}\n                                                onValueChange={(newStatus) =>\n                                                    updateInvoiceStatus(invoice.id, newStatus).then(result => {\n                                                        if (result.error) {\n                                                            showToast(result.error, \"error\")\n                                                        } else if (result.data) {\n                                                            setInvoices(prev =>\n                                                                prev.map(inv =>\n                                                                    inv.id === invoice.id ? result.data : inv\n                                                                )\n                                                            )\n                                                            showToast(\"Status updated\", \"success\")\n                                                        }\n                                                    })\n                                                }\n                                            >\n                                                <SelectTrigger className=\"w-auto border-0 bg-transparent\">\n                                                    <Badge variant={statusConfig[invoice.status].variant}>\n                                                        {statusConfig[invoice.status].label}\n                                                    </Badge>\n                                                </SelectTrigger>\n                                                <SelectContent>\n                                                    <SelectItem value=\"draft\">Draft</SelectItem>\n                                                    <SelectItem value=\"sent\">Sent</SelectItem>\n                                                    <SelectItem value=\"paid\">Paid</SelectItem>\n                                                    <SelectItem value=\"overdue\">Overdue</SelectItem>\n                                                    <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                                                </SelectContent>\n                                            </Select>\n                                        </TableCell>\n                                        <TableCell>{new Date(invoice.created_at).toLocaleDateString()}</TableCell>\n                                        <TableCell className=\"text-right\">\n                                            <div className=\"flex items-center justify-end gap-2\">\n                                                <Button\n                                                    variant=\"ghost\"\n                                                    size=\"sm\"\n                                                    onClick={() => openSignedUrl(invoice.invoice_file_url)}\n                                                    title=\"View PDF\"\n                                                >\n                                                    <Eye className=\"h-4 w-4\" />\n                                                </Button>\n                                                <Button\n                                                    variant=\"ghost\"\n                                                    size=\"sm\"\n                                                    onClick={() => openSignedUrl(invoice.invoice_file_url, true)}\n                                                    title=\"Download PDF\"\n                                                >\n                                                    <Download className=\"h-4 w-4\" />\n                                                </Button>\n                                                <Button\n                                                    variant=\"ghost\"\n                                                    size=\"sm\"\n                                                    onClick={() => handleDelete(invoice.id, invoice.invoice_file_url)}\n                                                    title=\"Delete invoice\"\n                                                >\n                                                    <Trash2 className=\"h-4 w-4\" />\n                                                </Button>\n                                            </div>\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                        </Table>\n                    )}\n                </CardContent>\n            </Card>\n\n            <Dialog\n                open={isDialogOpen}\n                onOpenChange={open => {\n                    if (!open) {\n                        setSelectedFile(null)\n                        setSelectedClientId(\"\")\n                        setSelectedProjectId(\"\")\n                        setInvoiceNumber(\"\")\n                        setSubmitting(false)\n                        isSubmittingRef.current = false\n                    }\n                    setIsDialogOpen(open)\n                }}\n            >\n                <DialogContent className=\"max-w-md\">\n                    <form onSubmit={handleSubmit}>\n                        <DialogHeader>\n                            <DialogTitle>Upload Invoice</DialogTitle>\n                            <DialogDescription>Upload an invoice PDF and select the client and project</DialogDescription>\n                        </DialogHeader>\n\n                        <div className=\"space-y-4 py-4\">\n                            <div>\n                                <Label>Invoice PDF *</Label>\n                                <Input\n                                    type=\"file\"\n                                    accept=\".pdf\"\n                                    onChange={e => setSelectedFile(e.target.files?.[0] || null)}\n                                    className=\"mt-1\"\n                                    required\n                                />\n                                {selectedFile && (\n                                    <p className=\"mt-1 text-xs text-muted-foreground\">\n                                        {selectedFile.name} ({(selectedFile.size / 1024).toFixed(2)} KB)\n                                    </p>\n                                )}\n                            </div>\n\n                            <div>\n                                <Label>Invoice Number *</Label>\n                                <Input\n                                    value={invoiceNumber}\n                                    onChange={e => setInvoiceNumber(e.target.value)}\n                                    className=\"mt-1\"\n                                    placeholder=\"INV-2024-001\"\n                                    required\n                                />\n                            </div>\n\n                            <div>\n                                <Label>Client *</Label>\n                                <Select\n                                    value={selectedClientId}\n                                    onValueChange={value => {\n                                        setSelectedClientId(value)\n                                        setSelectedProjectId(\"\")\n                                    }}\n                                    required\n                                >\n                                    <SelectTrigger className=\"mt-1\">\n                                        <SelectValue placeholder=\"Select client\" />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                        {clients.map(client => (\n                                            <SelectItem key={client.id} value={client.id}>\n                                                {client.company_name}\n                                            </SelectItem>\n                                        ))}\n                                    </SelectContent>\n                                </Select>\n                            </div>\n\n                            <div>\n                                <Label>Project (Optional)</Label>\n                                <Select\n                                    value={selectedProjectId}\n                                    onValueChange={setSelectedProjectId}\n                                    disabled={!selectedClientId}\n                                >\n                                    <SelectTrigger className=\"mt-1\">\n                                        <SelectValue\n                                            placeholder={selectedClientId ? \"Select project\" : \"Select client first\"}\n                                        />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                        {filteredProjects.map(project => (\n                                            <SelectItem key={project.id} value={project.id}>\n                                                {project.name}\n                                            </SelectItem>\n                                        ))}\n                                    </SelectContent>\n                                </Select>\n                            </div>\n                        </div>\n\n                        <DialogFooter>\n                            <Button type=\"button\" variant=\"outline\" onClick={() => setIsDialogOpen(false)} disabled={submitting}>\n                                Cancel\n                            </Button>\n                            <Button type=\"submit\" disabled={submitting || !selectedFile}>\n                                {submitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                                {submitting ? \"Uploading...\" : \"Upload Invoice\"}\n                            </Button>\n                        </DialogFooter>\n                    </form>\n                </DialogContent>\n            </Dialog>\n        </div>\n    )\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"40f54ce617644a4784493e827870e17a65e9273ef2\":\"uploadInvoiceFile\"},\"app/actions/upload-invoice.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var uploadInvoiceFile=/*#__PURE__*/createServerReference(\"40f54ce617644a4784493e827870e17a65e9273ef2\",callServer,void 0,findSourceMapURL,\"uploadInvoiceFile\");","/* __next_internal_action_entry_do_not_use__ [{\"005e4c4e42c0c2763b1f47fcf35b742542a8e3595f\":\"fetchInvoicesData\"},\"app/actions/invoice-operations.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var fetchInvoicesData=/*#__PURE__*/createServerReference(\"005e4c4e42c0c2763b1f47fcf35b742542a8e3595f\",callServer,void 0,findSourceMapURL,\"fetchInvoicesData\");","/* __next_internal_action_entry_do_not_use__ [{\"60a1647e99863c4a9ca254b5e3376492d2265241a0\":\"updateInvoiceStatus\"},\"app/actions/invoice-operations.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var updateInvoiceStatus=/*#__PURE__*/createServerReference(\"60a1647e99863c4a9ca254b5e3376492d2265241a0\",callServer,void 0,findSourceMapURL,\"updateInvoiceStatus\");","/* __next_internal_action_entry_do_not_use__ [{\"6080e6bd584b0a9051540e8465bc2512b088944e84\":\"deleteInvoice\"},\"app/actions/invoice-operations.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var deleteInvoice=/*#__PURE__*/createServerReference(\"6080e6bd584b0a9051540e8465bc2512b088944e84\",callServer,void 0,findSourceMapURL,\"deleteInvoice\");","/* __next_internal_action_entry_do_not_use__ [{\"400ac50675809b5125de28467cacbc1423e833b418\":\"getSignedInvoiceUrl\"},\"app/actions/invoice-operations.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var getSignedInvoiceUrl=/*#__PURE__*/createServerReference(\"400ac50675809b5125de28467cacbc1423e833b418\",callServer,void 0,findSourceMapURL,\"getSignedInvoiceUrl\");"],"names":[],"mappings":"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"}