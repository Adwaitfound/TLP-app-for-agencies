module.exports=[54161,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(97895);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},77156,a=>{"use strict";let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},24669,a=>{"use strict";let b=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],24669)},39786,a=>{"use strict";var b=a.i(87924),c=a.i(54161);function d({status:a}){return(0,b.jsx)(c.Badge,{variant:(a=>{switch(a){case"completed":case"done":case"paid":case"active":return"success";case"in_progress":case"in_review":case"sent":return"info";case"planning":case"pending":case"draft":return"warning";case"stuck":case"blocked":case"cancelled":case"overdue":case"inactive":return"destructive";default:return"default"}})(a),children:a.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")})}a.s(["StatusBadge",()=>d])},35114,a=>{"use strict";var b=a.i(87924),c=a.i(3130),d=a.i(24669);let e=(0,a.i(70106).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var f=a.i(97895);function g({title:a,value:g,change:h,trend:i="neutral",icon:j,iconClassName:k}){return(0,b.jsxs)(c.Card,{children:[(0,b.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(c.CardTitle,{className:"text-sm font-medium",children:a}),j&&(0,b.jsx)(j,{className:(0,f.cn)("h-4 w-4 text-muted-foreground",k)})]}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:g}),h&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:["up"===i&&(0,b.jsx)(d.TrendingUp,{className:"h-3 w-3 text-green-500"}),"down"===i&&(0,b.jsx)(e,{className:"h-3 w-3 text-red-500"}),(0,b.jsx)("span",{className:(0,f.cn)("up"===i&&"text-green-500","down"===i&&"text-red-500","neutral"===i&&"text-muted-foreground"),children:h}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"from last period"})]})]})]})}a.s(["StatCard",()=>g],35114)},45842,a=>{"use strict";let b=(0,a.i(70106).default)("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);a.s(["CalendarClock",()=>b],45842)},55829,a=>{"use strict";var b=a.i(87924),c=a.i(38422),d=a.i(72131),e=a.i(50944),f=a.i(35114),g=a.i(3130),h=a.i(40695),i=a.i(63416),j=a.i(84505),k=a.i(4720),l=a.i(15618),m=a.i(77156);let n=(0,a.i(70106).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var o=a.i(45842),p=a.i(87682),q=a.i(39786),r=a.i(69240);function s(){let{user:a,loading:s}=(0,c.useAuth)(),t=(0,e.useRouter)(),[u,v]=(0,d.useState)([]),[w,x]=(0,d.useState)([]),[y,z]=(0,d.useState)([]),[A,B]=(0,d.useState)(null),[C,D]=(0,d.useState)(!0),[E,F]=(0,d.useState)("all"),[G,H]=(0,d.useState)("all"),[I,J]=(0,d.useState)({activeProjects:0,completedProjects:0,pendingInvoices:0,totalSpent:0}),K=(0,d.useMemo)(()=>"all"===E?u:u.filter(a=>a.status===E),[u,E]),L=(0,d.useMemo)(()=>"all"===G?w:w.filter(a=>a.status===G),[w,G]),M=(0,d.useMemo)(()=>[...w].filter(a=>"paid"!==a.status&&a.due_date).sort((a,b)=>new Date(a.due_date).getTime()-new Date(b.due_date).getTime())[0],[w]),N=(0,d.useMemo)(()=>[...y].sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime())[0],[y]);if((0,d.useEffect)(()=>{!async function(){if(!a||s)return;let b=(0,r.createClient)();try{let{data:c,error:d}=await b.from("clients").select("*").eq("user_id",a.id).single();if(d)throw d;B(c);let{data:e,error:f}=await b.from("projects").select("*").eq("client_id",c.id).order("created_at",{ascending:!1});if(f)throw f;let{data:g,error:h}=await b.from("invoices").select("*").eq("client_id",c.id).order("created_at",{ascending:!1});if(h)throw h;let i=e?.map(a=>a.id)||[],{data:j,error:k}=await b.from("project_files").select("*, projects(name)").in("project_id",i).order("created_at",{ascending:!1}).limit(5);if(k)throw k;v(e||[]),x(g||[]),z(j||[]);let l=e?.filter(a=>"in_progress"===a.status||"in_review"===a.status)?.length||0,m=e?.filter(a=>"completed"===a.status)?.length||0,n=g?.filter(a=>"sent"===a.status||"overdue"===a.status)?.length||0,o=g?.filter(a=>"paid"===a.status)?.reduce((a,b)=>a+(b.total||0),0)||0;J({activeProjects:l,completedProjects:m,pendingInvoices:n,totalSpent:o})}catch(a){console.error("Error fetching client data:",a)}finally{D(!1)}}()},[a?.id,s]),s||C)return(0,b.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})});let O=[{title:"Active Projects",value:I.activeProjects.toString(),change:`${I.completedProjects} completed`,trend:"neutral",icon:i.FolderKanban},{title:"Total Spent",value:`₹${I.totalSpent.toLocaleString()}`,change:"Paid invoices",trend:"neutral",icon:k.FileText},{title:"Pending Invoices",value:I.pendingInvoices.toString(),change:"Awaiting payment",trend:I.pendingInvoices>0?"down":"neutral",icon:k.FileText},{title:"Latest Files",value:y.length.toString(),change:"Available downloads",trend:"up",icon:j.Download},{title:"Next Due Invoice",value:M?`₹${(M.total||0).toLocaleString()}`:"None",change:M?`Due ${new Date(M.due_date).toLocaleDateString()}`:"All paid",trend:M?"down":"up",icon:o.CalendarClock},{title:"Last Delivery",value:N?N.file_name||"File":"No files",change:N?`From ${N.projects?.name||"Project"}`:"Waiting for first upload",trend:N?"up":"neutral",icon:j.Download}];return(0,b.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold tracking-tight",children:["Welcome, ",A?.company_name]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track your projects and download deliverables"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>F("all"===E?"in_progress":"all"),children:[(0,b.jsx)(n,{className:"h-4 w-4 mr-2"}),"all"===E?"Show Active":"Show All"]}),(0,b.jsxs)(h.Button,{onClick:()=>t.push("/dashboard/client/request"),children:[(0,b.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Request Project"]})]})]}),(0,b.jsx)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:O.map(a=>(0,b.jsx)(f.StatCard,{...a},a.title))}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(g.CardTitle,{className:"text-lg md:text-xl",children:"Your Projects"}),(0,b.jsx)(g.CardDescription,{className:"text-xs md:text-sm",children:"Track progress and view updates"})]})}),(0,b.jsx)(g.CardContent,{children:0===K.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"No projects match this filter"}),(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>F("all"),children:"Reset Filter"})]}):(0,b.jsx)("div",{className:"space-y-4",children:K.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border hover:bg-accent cursor-pointer transition-colors",onClick:()=>t.push(`/dashboard/client/projects/${a.id}`),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:a.description})]}),(0,b.jsx)(q.StatusBadge,{status:a.status})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,b.jsx)("div",{className:"h-2 flex-1 bg-secondary rounded-full overflow-hidden max-w-[200px]",children:(0,b.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:`${a.progress_percentage}%`}})}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.progress_percentage,"%"]})]}),(0,b.jsxs)(h.Button,{size:"sm",variant:"outline",onClick:b=>{b.stopPropagation(),t.push(`/dashboard/client/projects/${a.id}`)},children:[(0,b.jsx)(m.Eye,{className:"h-4 w-4 mr-1"}),"View"]})]})]},a.id))})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(g.CardTitle,{className:"text-lg md:text-xl",children:"Latest Deliverables"}),(0,b.jsx)(g.CardDescription,{className:"text-xs md:text-sm",children:"Recent files from your projects"})]})}),(0,b.jsx)(g.CardContent,{children:0===y.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No files yet"}):(0,b.jsx)("div",{className:"space-y-3",children:y.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent cursor-pointer transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,b.jsx)(k.FileText,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-sm truncate",children:a.file_name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.projects?.name})]})]}),(0,b.jsx)(h.Button,{size:"sm",variant:"ghost",onClick:()=>{t.push(`/dashboard/client/projects/${a.project_id}`)},children:(0,b.jsx)(m.Eye,{className:"h-4 w-4"})})]},a.id))})})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.CardTitle,{className:"text-lg md:text-xl",children:"Invoices"}),(0,b.jsx)(g.CardDescription,{className:"text-xs md:text-sm",children:"View and pay your invoices"})]}),(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:()=>t.push("/dashboard/client/invoices"),children:"View All"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-3",children:(0,b.jsxs)(p.Select,{value:G,onValueChange:H,children:[(0,b.jsx)(p.SelectTrigger,{className:"w-[170px]",children:(0,b.jsx)(p.SelectValue,{placeholder:"All invoices"})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(p.SelectItem,{value:"paid",children:"Paid"}),(0,b.jsx)(p.SelectItem,{value:"sent",children:"Sent"}),(0,b.jsx)(p.SelectItem,{value:"overdue",children:"Overdue"})]})]})}),0===L.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No invoices match this filter"}):(0,b.jsx)("div",{className:"space-y-3",children:L.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent cursor-pointer transition-colors",onClick:()=>t.push(`/dashboard/client/invoices/${a.id}`),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.invoice_number}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Due: ",new Date(a.due_date).toLocaleDateString()]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-medium",children:["₹",a.total?.toLocaleString()]}),(0,b.jsx)(q.StatusBadge,{status:a.status})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[(0,b.jsxs)(h.Button,{size:"sm",variant:"outline",onClick:b=>{b.stopPropagation(),a.invoice_url&&window.open(a.invoice_url,"_blank")},children:[(0,b.jsx)(j.Download,{className:"h-4 w-4 mr-1"})," PDF"]}),"paid"!==a.status&&(0,b.jsx)(h.Button,{size:"sm",onClick:b=>{b.stopPropagation(),t.push(`/dashboard/client/invoices/${a.id}/pay`)},children:"Pay Now"})]})]},a.id))})]})]}),u.length>0&&(0,b.jsx)(g.Card,{className:"bg-primary/5 border-primary/20",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Need Another Project?"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Submit a request and our team will get back to you"})]}),(0,b.jsxs)(h.Button,{onClick:()=>t.push("/dashboard/client/request"),children:[(0,b.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"New Request"]})]})})})]})}function t(){let{loading:a}=(0,c.useAuth)();return a?(0,b.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):(0,b.jsx)(s,{})}a.s(["default",()=>t],55829)}];

//# sourceMappingURL=_db02f291._.js.map