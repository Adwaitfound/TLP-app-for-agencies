module.exports=[56051,a=>{"use strict";var b=a.i(37936),c=a.i(98310);async function d(a){try{let b=(0,c.createServiceClient)(),{error:d}=await b.from("users").upsert({id:a.id,email:a.email,full_name:a.full_name||a.email.split("@")[0],role:a.role,company_name:a.company_name||null,status:"client"===a.role?"pending":"approved"},{onConflict:"id"});if(d)return{success:!1,error:d.message};return{success:!0}}catch(a){return{success:!1,error:a?.message||"Unexpected error registering pending user"}}}(0,a.i(13095).ensureServerEntryExports)([d]),(0,b.registerServerReference)(d,"40ccf2a3dde700e871dd0ca51628e0652e1064d905",null),a.s(["registerPendingUser",()=>d])},41813,a=>{"use strict";var b=a.i(37936),c=a.i(98310);async function d(a){try{let b=(0,c.createServiceClient)(),{data:d,error:e}=await b.from("users").select("id, email, status, role").eq("email",a).limit(1).single();if(e)return{success:!1,error:e.message};let f=d?.id;if(!f){let{data:c,error:d}=await b.auth.admin.listUsers({perPage:200});if(d)return{success:!1,error:d.message};let e=c?.users?.find(b=>(b?.email||"").toLowerCase()===a.toLowerCase());if(!e?.id)return{success:!1,error:"User not found for provided email"};f=e.id}let{error:g}=await b.auth.admin.updateUserById(f,{email_confirm:!0});if(g)return{success:!1,error:g.message};return{success:!0,userId:f}}catch(a){return{success:!1,error:a?.message||"Unexpected error while confirming email"}}}(0,a.i(13095).ensureServerEntryExports)([d]),(0,b.registerServerReference)(d,"407dfc82b3267d99c51cea5a0a0ab48bad3c28a250",null),a.s(["forceConfirmEmail",()=>d])},27448,a=>{"use strict";var b=a.i(74779),c=a.i(41813),d=a.i(56051);a.s([],7485),a.i(7485),a.s(["4001860d967ff1d29143ee49c09c9bbdff4d1af8fb",()=>b.logAuditEvent,"407dfc82b3267d99c51cea5a0a0ab48bad3c28a250",()=>c.forceConfirmEmail,"40ccf2a3dde700e871dd0ca51628e0652e1064d905",()=>d.registerPendingUser],27448)},85685,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[externals]_crypto_c412f66b._.js"].map(b=>a.l(b))).then(()=>b(54799)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__66baaa6b._.js.map