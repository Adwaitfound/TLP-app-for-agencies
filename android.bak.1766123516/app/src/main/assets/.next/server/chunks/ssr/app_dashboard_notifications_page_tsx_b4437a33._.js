module.exports=[67506,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(69240),e=a.i(38422),f=a.i(3130),g=a.i(40695),h=a.i(5050),i=(0,h.createServerReference)("408c33e2053a5e4ec12804d77b9a527496c0be7d31",h.callServer,void 0,h.findSourceMapURL,"markAllNotificationsRead");function j(){let{user:a}=(0,e.useAuth)(),[h,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1);(0,c.useEffect)(()=>{!async function(){if(!a)return;let b=(0,d.createClient)();l(!0);try{let{data:c}=await b.from("notifications").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(200);j(c||[])}catch(a){console.error("Failed to fetch notifications",a)}finally{l(!1)}}()},[a?.id]);let o=async()=>{a&&(n(!0),(await i(a.id)).success&&j(a=>a.map(a=>({...a,read:!0}))),n(!1))};return(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{children:"Notifications"}),(0,b.jsx)(f.CardDescription,{children:"In-app alerts for comments and assignments"})]}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:o,disabled:m,children:"Mark all read"})]}),(0,b.jsx)(f.CardContent,{className:"space-y-3",children:k?(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loadingâ€¦"}):0===h.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No notifications"}):h.map(a=>(0,b.jsxs)("div",{className:`p-3 border rounded-lg ${a.read?"bg-background":"bg-accent/20"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:a.type}),(0,b.jsx)("span",{children:new Date(a.created_at).toLocaleString()})]}),(0,b.jsx)("p",{className:"text-sm",children:a.message})]},a.id))})]})})}a.s(["default",()=>j],67506)}];

//# sourceMappingURL=app_dashboard_notifications_page_tsx_b4437a33._.js.map